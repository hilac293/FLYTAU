{% extends "base.html" %}

{% block title %}דף הבית - FLYTAU{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='homepage.css') }}">
{% endblock %}

{% block content %}
<main class="main-container">
    <div class="homepage-intro">
        <h1>בואו נצא לטיסה חלומית! ✨</h1>
        <p>תכננו את החופשה הבאה שלכם עם FlyTau - הכי בבית בעולם!</p>
    </div>
    <div class="airplane-image">
        <img src="{{ url_for('static', filename='imgs/airplane-homepage.png') }}" alt="Airplane" />
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-container">
      {% for category, message in messages %}
        <div class="flash-message {{ category }}">
            <span class="flash-icon">⚠️</span>
            <span class="flash-text">{{ message }}</span>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
    <!-- Flight search card -->
      <div class="card">
        <form method="POST" action="{{ url_for('search_flights') }}" class="form-horizontal">

            <!-- Source -->
            <div class="field">
                <label for="source">מקור</label>
                    <input list="origins_list" id="source" name="source" placeholder="בחר עיר או נמל תעופה" required
                           autocomplete="off"
                           value="{{ prev_source if prev_source in origins else '' }}">

                <datalist id="origins_list">
                    {% for origin in origins %}
                        <option value="{{ origin }}"></option>
                    {% endfor %}
                </datalist>
            </div>

            <!-- Destination -->
            <div class="field">
                <label for="destination">יעד</label>
                    <input list="destinations_list" id="destination" name="destination" placeholder="בחר יעד" required
                           autocomplete="off"
                           value="{{ prev_destination if prev_destination in destinations else '' }}">

                <datalist id="destinations_list">
                    {% for destination in destinations %}
                        <option value="{{ destination }}"></option>
                    {% endfor %}
                </datalist>
            </div>

            <!-- Departure date -->
            <div class="field">
                <label for="departure">תאריך יציאה</label>
                <input type="date" id="departure" name="departure"
                       min="{{ min_date }}"
                       required
                       value="{{ prev_departure or '' }}">
<!--                max="{{ max_date }}"-->
            </div>

            <!-- Number of passengers -->
            <div class="field">
                <label for="passengers">מספר נוסעים</label>
                <input type="number" id="passengers" name="passengers" min="1" required
                       value="{{ prev_passengers or 1 }}">
            </div>

            <!-- Search button -->
            <div class="field search-button">
                <button type="submit" class="btn btn-primary">חפש טיסה</button>
            </div>

        </form>
    </div>
</main>
{% endblock %}
